<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Detección de cuentas falsas – reglas_asociacion</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Detección de cuentas falsas</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Intro</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./analisis_exploratorio.html" rel="" target="">
 <span class="menu-text">Análisis Exploratorio</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./visualizacion.html" rel="" target="">
 <span class="menu-text">Visualización</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./reglas_asociacion.html" rel="" target="" aria-current="page">
 <span class="menu-text">Reglas de asociación</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./FCA.html" rel="" target="">
 <span class="menu-text">FCA</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./regresion.html" rel="" target="">
 <span class="menu-text">Regresión</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./series_temporales.html" rel="" target="">
 <span class="menu-text">Series Temporales</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./summary.html" rel="" target="">
 <span class="menu-text">Conclusión</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./references.html" rel="" target="">
 <span class="menu-text">References</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#reglas-de-asociación" id="toc-reglas-de-asociación" class="nav-link active" data-scroll-target="#reglas-de-asociación">Reglas de asociación</a>
  <ul class="collapse">
  <li><a href="#preprocesamiento" id="toc-preprocesamiento" class="nav-link" data-scroll-target="#preprocesamiento">Preprocesamiento</a></li>
  <li><a href="#aplicando-algoritmo-apriori" id="toc-aplicando-algoritmo-apriori" class="nav-link" data-scroll-target="#aplicando-algoritmo-apriori">Aplicando algoritmo Apriori</a></li>
  <li><a href="#filtrando-reglas" id="toc-filtrando-reglas" class="nav-link" data-scroll-target="#filtrando-reglas">Filtrando reglas</a>
  <ul class="collapse">
  <li><a href="#qué-tienen-en-común-las-cuentas-populares" id="toc-qué-tienen-en-común-las-cuentas-populares" class="nav-link" data-scroll-target="#qué-tienen-en-común-las-cuentas-populares">¿Qué tienen en común las cuentas populares?</a></li>
  <li><a href="#suelen-las-cuentas-públicas-aportar-mucha-información-o-tener-mucha-actividad" id="toc-suelen-las-cuentas-públicas-aportar-mucha-información-o-tener-mucha-actividad" class="nav-link" data-scroll-target="#suelen-las-cuentas-públicas-aportar-mucha-información-o-tener-mucha-actividad">¿Suelen las cuentas públicas aportar mucha información o tener mucha actividad?</a></li>
  <li><a href="#qué-caracteriza-a-una-cuenta-falsa" id="toc-qué-caracteriza-a-una-cuenta-falsa" class="nav-link" data-scroll-target="#qué-caracteriza-a-una-cuenta-falsa">¿Qué caracteriza a una cuenta falsa?</a></li>
  <li><a href="#y-a-una-cuenta-real" id="toc-y-a-una-cuenta-real" class="nav-link" data-scroll-target="#y-a-una-cuenta-real">¿Y a una cuenta real?</a></li>
  </ul></li>
  <li><a href="#trabajando-con-itemsets" id="toc-trabajando-con-itemsets" class="nav-link" data-scroll-target="#trabajando-con-itemsets">Trabajando con itemsets</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">



<section id="reglas-de-asociación" class="level1">
<h1>Reglas de asociación</h1>
<p>En este capítulo vamos a utilizar una técnica muy común en minería de datos que nos permitirá encontrar relaciones dentro del conjunto de datos que disponemos. Para ello, extraeremos un conjunto de reglas con el algoritmo apriori, proporcionado en la librería <em>arules.</em> Como en los capítulos anteriores ya hemos extraído cierta información, podemos presuponer que obtendremos reglas similares a la siguiente:</p>
<p><code>{profile.pic==0, description.length==short} =&gt; {fake}</code></p>
<p>Sin embargo, puede haber ciertas relaciones que hayamos pasado por alto. Así que con la ayuda de arules, encontraremos todas las que sean relevantes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Librerías</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(arules)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(arulesViz)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer) <span class="co"># Para el color</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Datos</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>insta_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"train.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="preprocesamiento" class="level2">
<h2 class="anchored" data-anchor-id="preprocesamiento">Preprocesamiento</h2>
<p>Antes de poder trabajar con el conjunto de datos, deberemos transformar en factores sus atributos. Para ello, he estudiado los valores mínimos y máximos, así como la media, de cada atributo, de modo que pudiese obtener una división realista de cada grupo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Elimino columnas</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>insta_data<span class="sc">$</span>nums.length.fullname <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>insta_data<span class="sc">$</span>nums.length.username <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertimos en factor</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>insta_data<span class="sc">$</span>name..username <span class="ot">&lt;-</span> insta_data<span class="sc">$</span>name..username <span class="sc">%&gt;%</span> <span class="fu">as.factor</span>()</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>insta_data<span class="sc">$</span>profile.pic <span class="ot">&lt;-</span> insta_data<span class="sc">$</span>profile.pic <span class="sc">%&gt;%</span> <span class="fu">as.factor</span>()</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>insta_data<span class="sc">$</span>external.URL <span class="ot">&lt;-</span> insta_data<span class="sc">$</span>external.URL <span class="sc">%&gt;%</span> <span class="fu">as.factor</span>()</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>insta_data<span class="sc">$</span>private <span class="ot">&lt;-</span> insta_data<span class="sc">$</span>private <span class="sc">%&gt;%</span> <span class="fu">as.factor</span>()</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>insta_data<span class="sc">$</span>fake <span class="ot">&lt;-</span> insta_data<span class="sc">$</span>fake <span class="sc">%&gt;%</span> <span class="fu">as.factor</span>()</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Categorizamos</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>insta_data<span class="sc">$</span>description.length <span class="ot">&lt;-</span> <span class="fu">cut</span>(insta_data<span class="sc">$</span>description.length, </span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>                      <span class="at">breaks =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">22</span>, <span class="dv">100</span>, <span class="cn">Inf</span>), </span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>                      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"None"</span>, <span class="st">"Short"</span>, <span class="st">"Medium"</span>, <span class="st">"Large"</span>))</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>insta_data<span class="sc">$</span>fullname.words <span class="ot">&lt;-</span> <span class="fu">cut</span>(insta_data<span class="sc">$</span>fullname.words, </span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>                      <span class="at">breaks =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">4</span>, <span class="dv">8</span>, <span class="cn">Inf</span>), </span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>                      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"None"</span>, <span class="st">"Short"</span>, <span class="st">"Medium"</span>, <span class="st">"Long"</span>))</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>insta_data<span class="sc">$</span>X.posts <span class="ot">&lt;-</span> <span class="fu">cut</span>(insta_data<span class="sc">$</span>X.posts, </span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>                      <span class="at">breaks =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">50</span>, <span class="dv">200</span>, <span class="cn">Inf</span>), </span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>                      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"None"</span>, <span class="st">"Few"</span>, <span class="st">"Regular"</span>, <span class="st">"Lots"</span>))</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>insta_data<span class="sc">$</span>X.followers <span class="ot">&lt;-</span> <span class="fu">discretize</span>(insta_data<span class="sc">$</span>X.followers, <span class="at">method =</span> <span class="st">"frequency"</span>, <span class="at">breaks =</span> <span class="dv">3</span>, <span class="at">labels=</span><span class="fu">c</span>(<span class="st">"Few"</span>, <span class="st">"Regular"</span>, <span class="st">"Lots"</span>))</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>insta_data<span class="sc">$</span>X.follows <span class="ot">&lt;-</span> <span class="fu">discretize</span>(insta_data<span class="sc">$</span>X.follows, <span class="at">method =</span> <span class="st">"frequency"</span>, <span class="at">breaks =</span> <span class="dv">3</span>, <span class="at">labels=</span><span class="fu">c</span>(<span class="st">"Few"</span>, <span class="st">"Regular"</span>, <span class="st">"Lots"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Una vez tenemos los datos preparados, veamos qué frecuencia absoluta tienen sus items.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">itemFrequencyPlot</span>(<span class="fu">as</span>(insta_data, <span class="st">"transactions"</span>), <span class="at">type =</span> <span class="st">"absolute"</span>, <span class="at">col =</span> <span class="fu">brewer.pal</span>(<span class="dv">8</span>, <span class="st">'Pastel2'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="reglas_asociacion_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="aplicando-algoritmo-apriori" class="level2">
<h2 class="anchored" data-anchor-id="aplicando-algoritmo-apriori">Aplicando algoritmo Apriori</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>rules <span class="ot">&lt;-</span> <span class="fu">apriori</span>(insta_data, <span class="at">parameter =</span> <span class="fu">list</span>(<span class="at">support=</span><span class="fl">0.1</span>, <span class="at">conf=</span><span class="fl">0.9</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Apriori

Parameter specification:
 confidence minval smax arem  aval originalSupport maxtime support minlen
        0.9    0.1    1 none FALSE            TRUE       5     0.1      1
 maxlen target  ext
     10  rules TRUE

Algorithmic control:
 filter tree heap memopt load sort verbose
    0.1 TRUE TRUE  FALSE TRUE    2    TRUE

Absolute minimum support count: 57 

set item appearances ...[0 item(s)] done [0.00s].
set transactions ...[28 item(s), 576 transaction(s)] done [0.00s].
sorting and recoding items ... [23 item(s)] done [0.00s].
creating transaction tree ... done [0.00s].
checking subsets of size 1 2 3 4 5 6 7 8 9 done [0.00s].
writing ... [3982 rule(s)] done [0.00s].
creating S4 object  ... done [0.00s].</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Porcentaje de reglas redundantes: "</span>, <span class="fu">mean</span>(<span class="fu">is.redundant</span>(rules)<span class="sc">*</span><span class="dv">100</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Porcentaje de reglas redundantes:  92.9683576092416"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Porcentaje de reglas significativas: "</span>, <span class="fu">mean</span>(<span class="fu">is.significant</span>(rules, transactions.obj, <span class="at">method =</span> <span class="st">"fisher"</span>)<span class="sc">*</span><span class="dv">100</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Porcentaje de reglas significativas:  58.4630838774485"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Elimino reglas redundantes</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>rules <span class="ot">&lt;-</span> rules[<span class="sc">!</span><span class="fu">is.redundant</span>(rules)]</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Elimino reglas poco significativas</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>rules <span class="ot">&lt;-</span> rules[<span class="fu">is.significant</span>(rules, transactions.obj, <span class="at">method =</span> <span class="st">"fisher"</span>)]</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Ordeno por lift</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>rules <span class="ot">&lt;-</span> <span class="fu">sort</span>(rules, <span class="at">by =</span> <span class="st">"lift"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Una vez creado el conjunto de reglas, podemos ver la información más relevante de ellas con el método <em>summary.</em></p>
<p>Esta función nos dice que tenemos 197 reglas, con una media de soporte del 21% y un 96% de confianza.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(rules)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>set of 197 rules

rule length distribution (lhs + rhs):sizes
 2  3  4  5  6  7  8 
27 79 51 25 11  3  1 

   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  2.000   3.000   3.000   3.629   4.000   8.000 

summary of quality measures:
    support         confidence        coverage           lift      
 Min.   :0.1007   Min.   :0.9000   Min.   :0.1076   Min.   :1.015  
 1st Qu.:0.1337   1st Qu.:0.9349   1st Qu.:0.1389   1st Qu.:1.285  
 Median :0.1892   Median :0.9625   Median :0.1997   Median :1.688  
 Mean   :0.2111   Mean   :0.9606   Mean   :0.2192   Mean   :1.743  
 3rd Qu.:0.2726   3rd Qu.:0.9899   3rd Qu.:0.2778   3rd Qu.:1.960  
 Max.   :0.6875   Max.   :1.0000   Max.   :0.7014   Max.   :3.241  
     count      
 Min.   : 58.0  
 1st Qu.: 77.0  
 Median :109.0  
 Mean   :121.6  
 3rd Qu.:157.0  
 Max.   :396.0  

mining info:
       data ntransactions support confidence
 insta_data           576     0.1        0.9
                                                                    call
 apriori(data = insta_data, parameter = list(support = 0.1, conf = 0.9))</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Observamos las cinco primeras reglas con mayor lift</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(rules[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    lhs                           rhs               support confidence  coverage     lift count
[1] {fullname.words=Short,                                                                     
     description.length=None,                                                                  
     private=0,                                                                                
     X.posts=None,                                                                             
     X.followers=Few,                                                                          
     X.follows=Few}            =&gt; {profile.pic=0} 0.1041667  0.9677419 0.1076389 3.240810    60
[2] {description.length=None,                                                                  
     private=0,                                                                                
     X.posts=None,                                                                             
     X.followers=Few,                                                                          
     X.follows=Few}            =&gt; {profile.pic=0} 0.1076389  0.9538462 0.1128472 3.194275    62
[3] {fullname.words=Short,                                                                     
     description.length=None,                                                                  
     private=0,                                                                                
     X.posts=None,                                                                             
     X.follows=Few,                                                                            
     fake=1}                   =&gt; {profile.pic=0} 0.1180556  0.9444444 0.1250000 3.162791    68
[4] {fullname.words=Short,                                                                     
     description.length=None,                                                                  
     private=0,                                                                                
     X.posts=None,                                                                             
     X.followers=Few}          =&gt; {profile.pic=0} 0.1128472  0.9420290 0.1197917 3.154702    65
[5] {fullname.words=Short,                                                                     
     description.length=None,                                                                  
     private=0,                                                                                
     X.followers=Few,                                                                          
     X.follows=Few,                                                                            
     fake=1}                   =&gt; {profile.pic=0} 0.1319444  0.9382716 0.1406250 3.142119    76</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizamos las reglas</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(rules)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="reglas_asociacion_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="filtrando-reglas" class="level2">
<h2 class="anchored" data-anchor-id="filtrando-reglas">Filtrando reglas</h2>
<section id="qué-tienen-en-común-las-cuentas-populares" class="level3">
<h3 class="anchored" data-anchor-id="qué-tienen-en-común-las-cuentas-populares">¿Qué tienen en común las cuentas populares?</h3>
<p>Vamos a ver aquellas reglas del tipo “Si una cuenta tiene muchos seguidores, entonces…”</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>rules_pop <span class="ot">&lt;-</span> <span class="fu">subset</span>(rules, <span class="at">subset =</span> lhs <span class="sc">%in%</span> <span class="st">"X.followers=Lots"</span>)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(rules_pop)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>set of 24 rules

rule length distribution (lhs + rhs):sizes
 2  3  4 
 3 13  8 

   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  2.000   3.000   3.000   3.208   4.000   4.000 

summary of quality measures:
    support         confidence        coverage           lift      
 Min.   :0.1076   Min.   :0.9375   Min.   :0.1076   Min.   :1.031  
 1st Qu.:0.1532   1st Qu.:0.9676   1st Qu.:0.1545   1st Qu.:1.404  
 Median :0.2726   Median :0.9870   Median :0.2847   Median :1.650  
 Mean   :0.2418   Mean   :0.9807   Mean   :0.2473   Mean   :1.628  
 3rd Qu.:0.3125   3rd Qu.:1.0000   3rd Qu.:0.3247   3rd Qu.:1.929  
 Max.   :0.3316   Max.   :1.0000   Max.   :0.3333   Max.   :2.000  
     count       
 Min.   : 62.00  
 1st Qu.: 88.25  
 Median :157.00  
 Mean   :139.25  
 3rd Qu.:180.00  
 Max.   :191.00  

mining info:
       data ntransactions support confidence
 insta_data           576     0.1        0.9
                                                                    call
 apriori(data = insta_data, parameter = list(support = 0.1, conf = 0.9))</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ordeno por soporte</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>rules_pop <span class="ot">&lt;-</span> <span class="fu">sort</span>(rules_pop, <span class="at">by=</span><span class="st">"support"</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizo las primeras</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">head</span>(rules_pop))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    lhs                                     rhs                support  
[1] {X.followers=Lots}                   =&gt; {name..username=0} 0.3315972
[2] {name..username=0, X.followers=Lots} =&gt; {profile.pic=1}    0.3246528
[3] {X.followers=Lots}                   =&gt; {profile.pic=1}    0.3246528
[4] {profile.pic=1, X.followers=Lots}    =&gt; {name..username=0} 0.3246528
[5] {name..username=0, X.followers=Lots} =&gt; {fake=0}           0.3125000
[6] {X.followers=Lots}                   =&gt; {fake=0}           0.3125000
    confidence coverage  lift     count
[1] 0.9947917  0.3333333 1.030576 191  
[2] 0.9790576  0.3315972 1.395884 187  
[3] 0.9739583  0.3333333 1.388614 187  
[4] 1.0000000  0.3246528 1.035971 187  
[5] 0.9424084  0.3315972 1.884817 180  
[6] 0.9375000  0.3333333 1.875000 180  </code></pre>
</div>
</div>
<p>También podemos observar aquellas reglas que solo tienen este atributo en la parte derecha, es decir, “Si una cuenta es …, entonces tiene muchos seguidores”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>rules_pop2 <span class="ot">&lt;-</span> <span class="fu">subset</span>(rules, <span class="at">subset =</span> rhs <span class="sc">%oin%</span> <span class="st">"X.followers=Lots"</span>)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(rules_pop2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    lhs                        rhs                  support confidence  coverage     lift count
[1] {X.posts=Lots,                                                                             
     fake=0}                =&gt; {X.followers=Lots} 0.1250000  0.9350649 0.1336806 2.805195    72
[2] {fullname.words=Short,                                                                     
     private=0,                                                                                
     X.follows=Lots,                                                                           
     fake=0}                =&gt; {X.followers=Lots} 0.1388889  0.9302326 0.1493056 2.790698    80
[3] {fullname.words=Short,                                                                     
     X.posts=Lots}          =&gt; {X.followers=Lots} 0.1145833  0.9295775 0.1232639 2.788732    66
[4] {private=0,                                                                                
     X.follows=Lots,                                                                           
     fake=0}                =&gt; {X.followers=Lots} 0.1545139  0.9270833 0.1666667 2.781250    89
[5] {X.posts=Lots}          =&gt; {X.followers=Lots} 0.1250000  0.9230769 0.1354167 2.769231    72</code></pre>
</div>
</div>
<p>Una conclusión interesante que obtenemos de estas reglas, es que las cuentas con muchos seguidores tienden a ser reales, además de que normalmente no son privadas y suelen hacer publicaciones con regularidad.</p>
</section>
<section id="suelen-las-cuentas-públicas-aportar-mucha-información-o-tener-mucha-actividad" class="level3">
<h3 class="anchored" data-anchor-id="suelen-las-cuentas-públicas-aportar-mucha-información-o-tener-mucha-actividad">¿Suelen las cuentas públicas aportar mucha información o tener mucha actividad?</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>rules_priv <span class="ot">&lt;-</span> <span class="fu">subset</span>(rules, <span class="at">subset =</span> (lhs <span class="sc">%ain%</span> <span class="st">"private=0"</span>))</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">head</span>(<span class="fu">sort</span>(rules_priv, <span class="at">by=</span><span class="st">"support"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    lhs                           rhs                      support confidence  coverage     lift count
[1] {profile.pic=1,                                                                                   
     private=0}                =&gt; {name..username=0}     0.4062500  0.9957447 0.4079861 1.031563   234
[2] {description.length=None,                                                                         
     private=0}                =&gt; {external.URL=0}       0.3437500  0.9801980 0.3506944 1.109222   198
[3] {description.length=None,                                                                         
     private=0}                =&gt; {fullname.words=Short} 0.3263889  0.9306931 0.3506944 1.049079   188
[4] {fullname.words=Short,                                                                            
     description.length=None,                                                                         
     private=0}                =&gt; {external.URL=0}       0.3211806  0.9840426 0.3263889 1.113573   185
[5] {description.length=None,                                                                         
     external.URL=0,                                                                                  
     private=0}                =&gt; {fullname.words=Short} 0.3211806  0.9343434 0.3437500 1.053193   185
[6] {private=0,                                                                                       
     fake=0}                   =&gt; {profile.pic=1}        0.3020833  1.0000000 0.3020833 1.425743   174</code></pre>
</div>
</div>
</section>
<section id="qué-caracteriza-a-una-cuenta-falsa" class="level3">
<h3 class="anchored" data-anchor-id="qué-caracteriza-a-una-cuenta-falsa">¿Qué caracteriza a una cuenta falsa?</h3>
<p>Primero voy a crear un subconjunto tan solo con las cuentas falsas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>rules_fake <span class="ot">&lt;-</span> <span class="fu">subset</span>(rules, <span class="at">subset =</span> (lhs <span class="sc">%ain%</span> <span class="st">"fake=1"</span> <span class="sc">|</span> rhs <span class="sc">%ain%</span> <span class="st">"fake=1"</span>))</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">head</span>(<span class="fu">sort</span>(rules_fake, <span class="at">by=</span><span class="st">"support"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    lhs                                           rhs                   
[1] {fake=1}                                   =&gt; {external.URL=0}      
[2] {X.followers=Few}                          =&gt; {fake=1}              
[3] {private=0, fake=1}                        =&gt; {fullname.words=Short}
[4] {profile.pic=0}                            =&gt; {fake=1}              
[5] {description.length=None, X.followers=Few} =&gt; {fake=1}              
[6] {profile.pic=0, description.length=None}   =&gt; {fake=1}              
    support   confidence coverage  lift     count
[1] 0.5000000 1.0000000  0.5000000 1.131631 288  
[2] 0.3229167 0.9687500  0.3333333 1.937500 186  
[3] 0.2986111 0.9450549  0.3159722 1.065267 172  
[4] 0.2951389 0.9883721  0.2986111 1.976744 170  
[5] 0.2864583 0.9763314  0.2934028 1.952663 165  
[6] 0.2829861 1.0000000  0.2829861 2.000000 163  </code></pre>
</div>
</div>
<p>Posteriormente, voy a buscar algunos atributos para ver qué valores tienden a tener dentro de este grupo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reglas que indican que hay cuentas falsas con pocos seguidores</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(rules_fake, <span class="at">subset =</span> items <span class="sc">%in%</span> <span class="st">"X.followers=Few"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>set of 15 rules </code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reglas que indican que hay cuentas falsas con muchos seguidores</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(rules_fake, <span class="at">subset =</span> items <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"X.followers=Regular"</span>, <span class="st">"X.followers=Lots"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>set of 0 rules </code></pre>
</div>
</div>
<p>También observamos que hay bastantes reglas para las cuentas falsas sin descripción.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">subset</span>(rules_fake, <span class="at">subset =</span> items <span class="sc">%in%</span> <span class="st">"description.length=None"</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    lhs                           rhs               support confidence  coverage     lift count
[1] {fullname.words=Short,                                                                     
     description.length=None,                                                                  
     private=0,                                                                                
     X.posts=None,                                                                             
     X.follows=Few,                                                                            
     fake=1}                   =&gt; {profile.pic=0} 0.1180556  0.9444444 0.1250000 3.162791    68
[2] {fullname.words=Short,                                                                     
     description.length=None,                                                                  
     private=0,                                                                                
     X.followers=Few,                                                                          
     X.follows=Few,                                                                            
     fake=1}                   =&gt; {profile.pic=0} 0.1319444  0.9382716 0.1406250 3.142119    76
[3] {description.length=None,                                                                  
     private=0,                                                                                
     X.posts=None,                                                                             
     X.follows=Few,                                                                            
     fake=1}                   =&gt; {profile.pic=0} 0.1215278  0.9333333 0.1302083 3.125581    70
[4] {description.length=None,                                                                  
     private=0,                                                                                
     X.followers=Few,                                                                          
     X.follows=Few,                                                                            
     fake=1}                   =&gt; {profile.pic=0} 0.1371528  0.9294118 0.1475694 3.112449    79
[5] {fullname.words=Short,                                                                     
     description.length=None,                                                                  
     private=0,                                                                                
     X.posts=None,                                                                             
     fake=1}                   =&gt; {profile.pic=0} 0.1475694  0.9139785 0.1614583 3.060765    85</code></pre>
</div>
</div>
<p>Como vimos en el análisis exploratorio de datos, si una cuenta no tiene URL externa, entonces es falsa.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">subset</span>(rules_fake, <span class="at">subset =</span> items <span class="sc">%in%</span> <span class="st">"external.URL=0"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    lhs                        rhs                support confidence coverage     lift count
[1] {fullname.words=Short,                                                                  
     external.URL=0,                                                                        
     private=0,                                                                             
     X.follows=Few}         =&gt; {fake=1}         0.1840278  0.9059829 0.203125 1.811966   106
[2] {fake=1}                =&gt; {external.URL=0} 0.5000000  1.0000000 0.500000 1.131631   288</code></pre>
</div>
</div>
</section>
<section id="y-a-una-cuenta-real" class="level3">
<h3 class="anchored" data-anchor-id="y-a-una-cuenta-real">¿Y a una cuenta real?</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>rules_real <span class="ot">&lt;-</span> <span class="fu">subset</span>(rules, <span class="at">subset =</span> (lhs <span class="sc">%ain%</span> <span class="st">"fake=0"</span> <span class="sc">|</span> rhs <span class="sc">%ain%</span> <span class="st">"fake=0"</span>))</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">head</span>(<span class="fu">sort</span>(rules_real, <span class="at">by=</span><span class="st">"support"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    lhs                                     rhs                support  
[1] {fake=0}                             =&gt; {name..username=0} 0.4982639
[2] {fake=0}                             =&gt; {profile.pic=1}    0.4965278
[3] {fullname.words=Short, fake=0}       =&gt; {profile.pic=1}    0.4340278
[4] {external.URL=0, fake=0}             =&gt; {name..username=0} 0.3836806
[5] {name..username=0, X.followers=Lots} =&gt; {fake=0}           0.3125000
[6] {X.followers=Lots}                   =&gt; {fake=0}           0.3125000
    confidence coverage  lift     count
[1] 0.9965278  0.5000000 1.032374 287  
[2] 0.9930556  0.5000000 1.415842 286  
[3] 0.9960159  0.4357639 1.420062 250  
[4] 1.0000000  0.3836806 1.035971 221  
[5] 0.9424084  0.3315972 1.884817 180  
[6] 0.9375000  0.3333333 1.875000 180  </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">subset</span>(rules_real, <span class="at">subset =</span> items <span class="sc">%in%</span> <span class="st">"external.URL=1"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    lhs                 rhs      support   confidence coverage  lift count
[1] {external.URL=1} =&gt; {fake=0} 0.1163194 1          0.1163194 2    67   </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">subset</span>(rules_real, <span class="at">subset =</span> items <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"X.followers=Regular"</span>, <span class="st">"X.followers=Lots"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                             rhs                  support confidence  coverage     lift count
[1]  {X.posts=Lots,                                                                                  
      fake=0}                     =&gt; {X.followers=Lots} 0.1250000  0.9350649 0.1336806 2.805195    72
[2]  {fullname.words=Short,                                                                          
      private=0,                                                                                     
      X.follows=Lots,                                                                                
      fake=0}                     =&gt; {X.followers=Lots} 0.1388889  0.9302326 0.1493056 2.790698    80
[3]  {private=0,                                                                                     
      X.follows=Lots,                                                                                
      fake=0}                     =&gt; {X.followers=Lots} 0.1545139  0.9270833 0.1666667 2.781250    89
[4]  {X.posts=Lots,                                                                                  
      X.followers=Lots}           =&gt; {fake=0}           0.1250000  1.0000000 0.1250000 2.000000    72
[5]  {description.length=Medium,                                                                     
      private=0,                                                                                     
      X.followers=Lots}           =&gt; {fake=0}           0.1232639  1.0000000 0.1232639 2.000000    71
[6]  {fullname.words=Short,                                                                          
      description.length=Medium,                                                                     
      X.followers=Lots}           =&gt; {fake=0}           0.1440972  1.0000000 0.1440972 2.000000    83
[7]  {description.length=Medium,                                                                     
      X.followers=Lots}           =&gt; {fake=0}           0.1562500  0.9890110 0.1579861 1.978022    90
[8]  {X.posts=Regular,                                                                               
      X.followers=Lots}           =&gt; {fake=0}           0.1215278  0.9722222 0.1250000 1.944444    70
[9]  {profile.pic=1,                                                                                 
      fullname.words=Short,                                                                          
      X.followers=Lots}           =&gt; {fake=0}           0.2725694  0.9691358 0.2812500 1.938272   157
[10] {profile.pic=1,                                                                                 
      private=0,                                                                                     
      X.followers=Lots}           =&gt; {fake=0}           0.2256944  0.9629630 0.2343750 1.925926   130
[11] {fullname.words=Short,                                                                          
      name..username=0,                                                                              
      X.followers=Lots}           =&gt; {fake=0}           0.2725694  0.9573171 0.2847222 1.914634   157
[12] {profile.pic=1,                                                                                 
      X.followers=Lots}           =&gt; {fake=0}           0.3107639  0.9572193 0.3246528 1.914439   179
[13] {fullname.words=Short,                                                                          
      X.followers=Lots}           =&gt; {fake=0}           0.2725694  0.9515152 0.2864583 1.903030   157
[14] {name..username=0,                                                                              
      X.followers=Lots}           =&gt; {fake=0}           0.3125000  0.9424084 0.3315972 1.884817   180
[15] {X.followers=Lots}           =&gt; {fake=0}           0.3125000  0.9375000 0.3333333 1.875000   180
[16] {fullname.words=Short,                                                                          
      X.followers=Lots,                                                                              
      fake=0}                     =&gt; {profile.pic=1}    0.2725694  1.0000000 0.2725694 1.425743   157
[17] {X.followers=Lots,                                                                              
      fake=0}                     =&gt; {profile.pic=1}    0.3107639  0.9944444 0.3125000 1.417822   179
[18] {X.followers=Lots,                                                                              
      fake=0}                     =&gt; {name..username=0} 0.3125000  1.0000000 0.3125000 1.035971   180</code></pre>
</div>
</div>
<p>Además de las reglas que son opuestas a las obtenidas para las cuentas falsas, observamos que es usual para las cuentas reales que tengan alguna descripción, foto de perfil y algunos posts.</p>
</section>
</section>
<section id="trabajando-con-itemsets" class="level2">
<h2 class="anchored" data-anchor-id="trabajando-con-itemsets">Trabajando con itemsets</h2>
<p>Otra opción interesante que nos da <em>arules</em> es encontrar un conjunto de items, en lugar de reglas. Probemos a obtener itemsets con al menos dos items y un 1% de soporte.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>itemsets <span class="ot">&lt;-</span> <span class="fu">apriori</span>(<span class="at">data =</span> insta_data, <span class="at">parameter =</span> <span class="fu">list</span>(<span class="at">support =</span> <span class="fl">0.01</span>, <span class="at">minlen =</span> <span class="dv">2</span>, <span class="at">target =</span> <span class="st">"frequent itemset"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Apriori

Parameter specification:
 confidence minval smax arem  aval originalSupport maxtime support minlen
         NA    0.1    1 none FALSE            TRUE       5    0.01      2
 maxlen            target  ext
     10 frequent itemsets TRUE

Algorithmic control:
 filter tree heap memopt load sort verbose
    0.1 TRUE TRUE  FALSE TRUE    2    TRUE

Absolute minimum support count: 5 

set item appearances ...[0 item(s)] done [0.00s].
set transactions ...[28 item(s), 576 transaction(s)] done [0.00s].
sorting and recoding items ... [27 item(s)] done [0.00s].
creating transaction tree ... done [0.00s].
checking subsets of size 1 2 3 4 5 6 7 8 9 10 done [0.01s].
sorting transactions ... done [0.00s].
writing ... [19655 set(s)] done [0.00s].
creating S4 object  ... done [0.00s].</code></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>itemsets <span class="ot">&lt;-</span> <span class="fu">sort</span>(itemsets, <span class="at">by=</span><span class="st">"support"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Observamos los primeros items.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(itemsets[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     items                     support count
[1]  {fullname.words=Short,                 
      name..username=0}      0.8524306   491
[2]  {name..username=0,                     
      external.URL=0}        0.8506944   490
[3]  {fullname.words=Short,                 
      external.URL=0}        0.7829861   451
[4]  {fullname.words=Short,                 
      name..username=0,                     
      external.URL=0}        0.7500000   432
[5]  {profile.pic=1,                        
      name..username=0}      0.6875000   396
[6]  {profile.pic=1,                        
      fullname.words=Short}  0.6093750   351
[7]  {name..username=0,                     
      private=0}             0.6006944   346
[8]  {profile.pic=1,                        
      fullname.words=Short,                 
      name..username=0}      0.5954861   343
[9]  {profile.pic=1,                        
      external.URL=0}        0.5850694   337
[10] {profile.pic=1,                        
      name..username=0,                     
      external.URL=0}        0.5729167   330</code></pre>
</div>
</div>
<p>Y visualizamos los más frecuentes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as</span>(itemsets[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>], <span class="at">Class =</span> <span class="st">"data.frame"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> items, <span class="at">y =</span> support)) <span class="sc">+</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">"brown3"</span>) <span class="sc">+</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="reglas_asociacion_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid" width="672"></p>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>